<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Birthday Surprise ‚ú®</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: Arial, sans-serif;
  background: #000;
  color: white;
  height: 100vh;
  overflow: hidden;
}

.page {
  position: fixed;
  width: 100%;
  height: 100%;
  display: none;
  top: 0;
  left: 0;
}

.page.active {
  display: block;
}

/* Login Page */
#login {
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  display: flex;
  align-items: center;
  justify-content: center;
}

.login-box {
  text-align: center;
  padding: 20px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  backdrop-filter: blur(10px);
  width: 90%;
  max-width: 300px;
}

.login-box h1 {
  margin-bottom: 20px;
  font-size: 24px;
}

.password-input {
  width: 100%;
  padding: 12px;
  margin: 10px 0;
  border: 1px solid rgba(255, 255, 255, 0.3);
  background: rgba(255, 255, 255, 0.1);
  color: white;
  border-radius: 5px;
  font-size: 16px;
  text-align: center;
}

.login-btn {
  width: 100%;
  padding: 12px;
  background: #ff6b6b;
  color: white;
  border: none;
  border-radius: 5px;
  font-size: 16px;
  cursor: pointer;
  margin-top: 10px;
}

.error {
  color: #ff6b6b;
  margin-top: 10px;
  font-size: 14px;
  min-height: 20px;
}

/* Media Pages */
.media-page {
  background: #000;
}

.media-page img,
.media-page video {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Voice Note Page */
#page8 {
  background: linear-gradient(135deg, #1a1a2e, #16213e);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
}

.voice-box {
  padding: 20px;
  width: 90%;
  max-width: 400px;
}

.voice-box h2 {
  font-size: 28px;
  margin: 20px 0 10px;
}

.voice-box p {
  font-size: 16px;
  opacity: 0.8;
  margin-bottom: 20px;
}

.play-btn {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.1);
  border: 2px solid rgba(255, 255, 255, 0.3);
  color: white;
  font-size: 24px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 20px auto;
}

.play-btn.playing {
  background: rgba(255, 107, 107, 0.3);
}

/* Progress Bar */
#progressContainer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 3px;
  background: rgba(255, 255, 255, 0.1);
  z-index: 1000;
  display: none;
}

#progressContainer.active {
  display: block;
}

#progressBar {
  height: 100%;
  background: #ff6b6b;
  width: 0%;
}

/* Page Counter */
#pageCounter {
  position: fixed;
  top: 10px;
  right: 10px;
  font-size: 14px;
  opacity: 0.5;
  z-index: 1001;
}

/* Navigation Dots */
#navDots {
  position: fixed;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 8px;
  z-index: 1001;
}

.nav-dot {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  cursor: pointer;
}

.nav-dot.active {
  background: white;
}

/* Home Button */
#homeBtn {
  position: fixed;
  top: 10px;
  left: 10px;
  width: 40px;
  height: 40px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 1001;
  display: none;
}

#homeBtn.active {
  display: flex;
}

/* Controls */
.controls {
  position: fixed;
  bottom: 20px;
  left: 20px;
  font-size: 12px;
  opacity: 0.3;
  z-index: 1001;
}

.video-indicator {
  position: fixed;
  bottom: 50px;
  right: 20px;
  background: rgba(0, 0, 0, 0.5);
  padding: 5px 10px;
  border-radius: 10px;
  font-size: 12px;
  z-index: 1001;
  display: none;
}
</style>
</head>
<body>

<div id="progressContainer">
  <div id="progressBar"></div>
</div>

<div id="pageCounter"></div>

<div id="homeBtn" onclick="goToPage(0)">‚åÇ</div>

<div id="navDots"></div>

<div class="controls">Click or use arrow keys</div>

<div class="video-indicator" id="videoIndicator">üéµ Audio On</div>

<!-- Login Page -->
<div id="login" class="page active">
  <div class="login-box">
    <div style="font-size: 40px; margin-bottom: 20px;">üéÇ</div>
    <h1>Birthday Surprise</h1>
    <p style="opacity: 0.7; margin-bottom: 20px;">Enter the date (01022026)</p>
    <input type="password" id="password" class="password-input" placeholder="Enter password" autofocus>
    <button class="login-btn" onclick="checkPassword()">Begin</button>
    <div id="error" class="error"></div>
  </div>
</div>

<!-- Image 1 -->
<div id="page2" class="page media-page">
  <img src="image1.jpg" alt="Image 1" onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align:center; padding-top:50%\'>üéâ Image 1</div>'">
</div>

<!-- Video 1 -->
<div id="page3" class="page media-page">
  <video id="video1" muted autoplay loop playsinline onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align:center; padding-top:50%\'>üé• Video 1</div>'">
    <source src="video.mp4" type="video/mp4">
  </video>
</div>

<!-- Image 2 -->
<div id="page4" class="page media-page">
  <img src="image2.jpg" alt="Image 2" onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align:center; padding-top:50%\'>‚ú® Image 2</div>'">
</div>

<!-- Image 3 -->
<div id="page5" class="page media-page">
  <img src="image3.jpg" alt="Image 3" onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align:center; padding-top:50%\'>üéä Image 3</div>'">
</div>

<!-- Image 4 -->
<div id="page6" class="page media-page">
  <img src="image4.jpg" alt="Image 4" onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align:center; padding-top:50%\'>üí´ Image 4</div>'">
</div>

<!-- Final Video -->
<div id="page7" class="page media-page">
  <video id="finalVideo" playsinline onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=\'text-align:center; padding-top:50%\'>üé¨ Final Video</div>'">
    <source src="final_video.mp4" type="video/mp4">
  </video>
</div>

<!-- Voice Note -->
<div id="page8" class="page">
  <div class="voice-box">
    <div style="font-size: 50px;">üéôÔ∏è</div>
    <h2>A Special Message</h2>
    <p>Listen to this personal voice note for you</p>
    <div class="play-btn" id="voicePlayBtn" onclick="toggleVoiceNote()">
      ‚ñ∂
    </div>
    <p style="opacity: 0.6; margin-top: 20px;">Click play to hear the message</p>
  </div>
</div>

<!-- Audio -->
<audio id="bgMusic" loop>
  <source src="moon.mp3" type="audio/mpeg">
</audio>

<audio id="voiceAudio">
  <source src="voice_note.mp3" type="audio/mpeg">
</audio>

<script>
// SIMPLE STATE
let currentPage = 0;
const pages = ['login', 'page2', 'page3', 'page4', 'page5', 'page6', 'page7', 'page8'];
let bgMusic = document.getElementById('bgMusic');

// INITIALIZE NAV DOTS
function initNavDots() {
  const navDots = document.getElementById('navDots');
  navDots.innerHTML = '';
  for (let i = 1; i < pages.length; i++) {
    const dot = document.createElement('div');
    dot.className = 'nav-dot';
    dot.onclick = () => goToPage(i);
    navDots.appendChild(dot);
  }
}

// GO TO PAGE
function goToPage(pageIndex) {
  if (pageIndex < 0 || pageIndex >= pages.length) return;
  
  // Hide current page
  document.getElementById(pages[currentPage]).classList.remove('active');
  
  // Stop current media
  stopMedia(currentPage);
  
  // Update current page
  currentPage = pageIndex;
  
  // Show new page
  document.getElementById(pages[currentPage]).classList.add('active');
  
  // Update UI
  updateUI();
  
  // Start new media
  startMedia(currentPage);
}

// STOP MEDIA
function stopMedia(pageIndex) {
  switch(pageIndex) {
    case 2: // page3 (video1)
      const video1 = document.getElementById('video1');
      if (video1) video1.pause();
      break;
    case 6: // page7 (final video)
      const finalVideo = document.getElementById('finalVideo');
      if (finalVideo) {
        finalVideo.pause();
        document.getElementById('videoIndicator').style.display = 'none';
      }
      break;
    case 7: // page8 (voice)
      const voiceAudio = document.getElementById('voiceAudio');
      if (voiceAudio) {
        voiceAudio.pause();
        document.getElementById('voicePlayBtn').classList.remove('playing');
        document.getElementById('voicePlayBtn').innerHTML = '‚ñ∂';
      }
      break;
  }
}

// START MEDIA
function startMedia(pageIndex) {
  // Handle background music
  if (pageIndex >= 1 && pageIndex <= 5) {
    // Play BGM on image pages (2-6) and first video
    if (bgMusic.paused) {
      bgMusic.volume = 0.3;
      bgMusic.play().catch(e => console.log('BGM error:', e));
    }
  } else {
    // Stop BGM on other pages
    if (!bgMusic.paused) {
      bgMusic.pause();
    }
  }
  
  // Handle specific media
  switch(pageIndex) {
    case 2: // page3 (video1)
      const video1 = document.getElementById('video1');
      if (video1) {
        video1.muted = true;
        video1.play().catch(e => console.log('Video1 error:', e));
      }
      break;
    case 6: // page7 (final video)
      const finalVideo = document.getElementById('finalVideo');
      if (finalVideo) {
        // Stop BGM
        bgMusic.pause();
        
        // Try to play final video with audio
        finalVideo.muted = false;
        finalVideo.volume = 1.0;
        
        finalVideo.play()
          .then(() => {
            document.getElementById('videoIndicator').style.display = 'block';
          })
          .catch(e => {
            console.log('Final video autoplay failed:', e);
            // Try muted
            finalVideo.muted = true;
            finalVideo.play()
              .then(() => {
                document.getElementById('videoIndicator').textContent = 'üîá Muted';
                document.getElementById('videoIndicator').style.display = 'block';
              })
              .catch(e => console.log('Muted also failed:', e));
          });
      }
      break;
  }
}

// UPDATE UI
function updateUI() {
  // Progress bar
  const progressContainer = document.getElementById('progressContainer');
  const progressBar = document.getElementById('progressBar');
  
  if (currentPage > 0) {
    progressContainer.classList.add('active');
    const progress = ((currentPage - 1) / (pages.length - 2)) * 100;
    progressBar.style.width = progress + '%';
  } else {
    progressContainer.classList.remove('active');
  }
  
  // Page counter
  const pageCounter = document.getElementById('pageCounter');
  if (currentPage > 0) {
    pageCounter.textContent = `${currentPage}/${pages.length - 1}`;
  } else {
    pageCounter.textContent = '';
  }
  
  // Home button
  const homeBtn = document.getElementById('homeBtn');
  if (currentPage > 0) {
    homeBtn.classList.add('active');
  } else {
    homeBtn.classList.remove('active');
  }
  
  // Nav dots
  const dots = document.querySelectorAll('.nav-dot');
  dots.forEach((dot, index) => {
    if (index === currentPage - 1) {
      dot.classList.add('active');
    } else {
      dot.classList.remove('active');
    }
  });
}

// CHECK PASSWORD
function checkPassword() {
  const password = document.getElementById('password').value;
  const error = document.getElementById('error');
  
  if (password === '01022026') {
    error.textContent = '';
    // Start BGM
    bgMusic.volume = 0.3;
    bgMusic.play().catch(e => console.log('BGM start error:', e));
    // Go to first content page
    goToPage(1);
  } else {
    error.textContent = 'Incorrect password. Try: 01022026';
  }
}

// VOICE NOTE
function toggleVoiceNote() {
  const voiceAudio = document.getElementById('voiceAudio');
  const playBtn = document.getElementById('voicePlayBtn');
  
  if (!voiceAudio) return;
  
  if (voiceAudio.paused) {
    // Stop BGM if playing
    if (!bgMusic.paused) {
      bgMusic.pause();
    }
    
    // Stop final video if playing
    const finalVideo = document.getElementById('finalVideo');
    if (finalVideo && !finalVideo.paused) {
      finalVideo.pause();
    }
    
    voiceAudio.play()
      .then(() => {
        playBtn.classList.add('playing');
        playBtn.innerHTML = '‚è∏';
      })
      .catch(e => {
        console.log('Voice note error:', e);
        playBtn.innerHTML = '‚ùå';
      });
  } else {
    voiceAudio.pause();
    playBtn.classList.remove('playing');
    playBtn.innerHTML = '‚ñ∂';
  }
}

// SETUP EVENT LISTENERS
function setupEventListeners() {
  // Password enter key
  document.getElementById('password').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') checkPassword();
  });
  
  // Keyboard navigation
  document.addEventListener('keydown', (e) => {
    if (currentPage === 0) return;
    
    if (e.key === 'ArrowRight' || e.key === ' ') {
      if (currentPage < pages.length - 1) {
        goToPage(currentPage + 1);
        e.preventDefault();
      }
    } else if (e.key === 'ArrowLeft') {
      if (currentPage > 0) {
        goToPage(currentPage - 1);
        e.preventDefault();
      }
    } else if (e.key === 'Escape') {
      goToPage(0);
      e.preventDefault();
    }
  });
  
  // Click to advance
  document.addEventListener('click', (e) => {
    if (currentPage === 0) return;
    
    // Don't advance if clicking on specific elements
    if (e.target.tagName === 'INPUT' || 
        e.target.tagName === 'BUTTON' ||
        e.target.closest('#navDots') ||
        e.target.closest('#homeBtn') ||
        e.target.closest('.play-btn') ||
        e.target.closest('.video-indicator')) {
      return;
    }
    
    if (currentPage < pages.length - 1) {
      goToPage(currentPage + 1);
    }
  });
  
  // Swipe for mobile
  let touchStartX = 0;
  document.addEventListener('touchstart', (e) => {
    touchStartX = e.touches[0].clientX;
  }, { passive: true });
  
  document.addEventListener('touchend', (e) => {
    const touchEndX = e.changedTouches[0].clientX;
    const diff = touchStartX - touchEndX;
    
    if (Math.abs(diff) > 50 && currentPage > 0) {
      if (diff > 0 && currentPage < pages.length - 1) {
        goToPage(currentPage + 1);
      } else if (diff < 0 && currentPage > 0) {
        goToPage(currentPage - 1);
      }
    }
  }, { passive: true });
  
  // Handle page visibility
  document.addEventListener('visibilitychange', () => {
    if (document.hidden) {
      // Pause everything when tab is hidden
      bgMusic.pause();
      const video1 = document.getElementById('video1');
      const finalVideo = document.getElementById('finalVideo');
      const voiceAudio = document.getElementById('voiceAudio');
      
      if (video1 && !video1.paused) video1.pause();
      if (finalVideo && !finalVideo.paused) finalVideo.pause();
      if (voiceAudio && !voiceAudio.paused) voiceAudio.pause();
    } else {
      // Resume when tab is visible
      if (currentPage >= 1 && currentPage <= 5) {
        bgMusic.play().catch(console.log);
      } else if (currentPage === 2) {
        const video1 = document.getElementById('video1');
        if (video1) video1.play().catch(console.log);
      } else if (currentPage === 6) {
        const finalVideo = document.getElementById('finalVideo');
        if (finalVideo && finalVideo.paused) {
          finalVideo.play().catch(console.log);
        }
      } else if (currentPage === 7) {
        const voiceAudio = document.getElementById('voiceAudio');
        if (voiceAudio && !voiceAudio.paused) {
          voiceAudio.play().catch(console.log);
        }
      }
    }
  });
}

// INITIALIZE
window.onload = function() {
  initNavDots();
  updateUI();
  setupEventListeners();
  
  // Auto-focus password input
  document.getElementById('password').focus();
};
</script>
</body>
</html>